import{r,j as t,c as A}from"./react-vendor-BzzwJzSH.js";import{s as v}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();function L(){const[n,d]=r.useState(null),[i,u]=r.useState(null),[e,s]=r.useState(0),[l,m]=r.useState(null),[x,j]=r.useState(!1),[p,h]=r.useState(!1),N=10;r.useEffect(()=>{(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{d({lat:o.coords.latitude,lng:o.coords.longitude})},o=>m("Ative a localização para usar o app")):m("Geolocalização não suportada")})()},[]),r.useEffect(()=>{if(n){const a=new Date,o=v.getTimes(a,n.lat,n.lng),f=(v.getPosition(o.sunset,n.lat,n.lng).azimuth*180/Math.PI+180)%360;u({time:o.sunset.toLocaleTimeString(),azimuth:f})}},[n]),r.useEffect(()=>{let a=0;const o=c=>{if(c.alpha!==null){const f=360-c.alpha,g=a*.8+f*.2;a=g,s(g)}};return window.addEventListener("deviceorientation",o,!0),()=>{window.removeEventListener("deviceorientation",o)}},[]);const E=(()=>{if(!i)return 0;const a=(i.azimuth-e+360)%360,c=Math.min(Math.abs(a),360-Math.abs(a))<N;return j(c),c&&!p?(navigator.vibrate&&navigator.vibrate(200),h(!0)):!c&&p&&h(!1),a})();return t.jsx("div",{className:"App",children:t.jsxs("header",{className:"App-header",children:[t.jsx("h1",{children:"Bússola do Pôr do Sol"}),l&&t.jsx("p",{className:"error",children:l}),i&&t.jsxs("div",{className:`compass-container ${x?"aligned":""}`,children:[t.jsxs("div",{className:"compass",children:[t.jsx("div",{className:"arrow",style:{transform:`rotate(${E}deg)`},children:t.jsx("div",{className:"sun-icon",children:"☀️"})}),t.jsx("div",{className:"compass-circle"})]}),t.jsxs("div",{className:"info",children:[t.jsxs("p",{children:["Horário: ",i.time]}),t.jsxs("p",{children:["Direção: ",i.azimuth.toFixed(1),"°"]}),t.jsx("p",{className:"help",children:"Gire o celular para alinhar a bússola"})]})]})]})})}A.createRoot(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(L,{})}));
//# sourceMappingURL=index-D3-wJI0U.js.map
