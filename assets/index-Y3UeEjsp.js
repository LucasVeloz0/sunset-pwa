import{r as i,j as o,c as A}from"./react-vendor-BzzwJzSH.js";import{s as m}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function c(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=c(e);fetch(e.href,r)}})();const j=(t,s)=>{const c=new Date,l=m.getTimes(c,t,s).sunset;return(m.getPosition(l,t,s).azimuth*180/Math.PI+180)%360},w=t=>(360-t)%360,E=()=>{const[t,s]=i.useState(null),[c,l]=i.useState(0),[e,r]=i.useState(0),[u,p]=i.useState(null),[h,v]=i.useState(!1);i.useEffect(()=>{const n=d=>{s({lat:d.coords.latitude,lng:d.coords.longitude})},a=d=>{p(d.message||"Erro ao obter localização")};if(!navigator.geolocation){p("Geolocalização não suportada");return}navigator.geolocation.getCurrentPosition(n,a,{enableHighAccuracy:!0,timeout:5e3})},[]),i.useEffect(()=>{if(t){const n=j(t.lat,t.lng);l(n)}},[t]),i.useEffect(()=>{const n=a=>{if(a.alpha!==null){let d=a.alpha;typeof a.webkitCompassHeading<"u"&&(d=a.webkitCompassHeading),r(w(d))}};return window.addEventListener("deviceorientation",n,!0),()=>{window.removeEventListener("deviceorientation",n)}},[]);const x=()=>{/android/i.test(navigator.userAgent)?(window.location.href="intent://media/camera#Intent;action=android.media.action.IMAGE_CAPTURE;end",setTimeout(()=>{document.hidden||navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{alert("Abra manualmente o app de câmera do seu dispositivo"),n.getTracks().forEach(a=>a.stop())}).catch(()=>{alert("Permissão de câmera negada ou dispositivo não suportado")})},1e3)):alert(`Aponte sua câmera na direção indicada:
`)+`Azimute: ${c.toFixed(1)}°
Horário ideal: `+new Date(m.getTimes(new Date,t.lat,t.lng).sunset.toLocaleTimeString()),v(!0)},f=()=>(c-e+360)%360,g=Math.abs(f())<5;return o.jsxs("div",{className:"app-container",children:[o.jsx("h1",{children:"🌅 Guia do Pôr do Sol"}),o.jsx("button",{className:`camera-button ${h?"active":""}`,onClick:x,children:"📸 Abrir Câmera"}),u&&o.jsx("div",{className:"error-banner",children:u}),o.jsxs("div",{className:"compass-wrapper",children:[o.jsxs("div",{className:"compass",children:[o.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${f()}deg)`},children:o.jsx("div",{className:"sun-indicator",children:"☀️"})}),o.jsx("div",{className:"alignment-marker"})]}),o.jsxs("div",{className:"info-panel",children:[o.jsxs("p",{children:["⏱ Horário do pôr do sol: ",t&&new Date(m.getTimes(new Date,t.lat,t.lng).sunset).toLocaleTimeString()]}),o.jsxs("p",{children:["🧭 Direção: ",c.toFixed(1),"°"]}),o.jsx("div",{className:`alignment-feedback ${g?"aligned":""}`,children:g?"⭐ ALINHADO! ⭐":"Gire o dispositivo... ➡️"})]})]})]})};A.createRoot(document.getElementById("root")).render(o.jsx(i.StrictMode,{children:o.jsx(E,{})}));
//# sourceMappingURL=index-Y3UeEjsp.js.map
