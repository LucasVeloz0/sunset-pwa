import{r as i,j as t,c as b}from"./react-vendor-BzzwJzSH.js";import{s as p}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=d(e);fetch(e.href,r)}})();const j=(o,c)=>{const d=new Date,l=p.getTimes(d,o,c).sunset;return(p.getPosition(l,o,c).azimuth*180/Math.PI+180)%360},E=o=>(360-o)%360,y=()=>{const[o,c]=i.useState(null),[d,l]=i.useState(0),[e,r]=i.useState(0),[u,g]=i.useState(null),[v,w]=i.useState(!1);i.useEffect(()=>{const a=s=>{c({lat:s.coords.latitude,lng:s.coords.longitude})},n=s=>{g(s.message||"Erro ao obter localização")};if(!navigator.geolocation){g("Geolocalização não suportada");return}navigator.geolocation.getCurrentPosition(a,n,{enableHighAccuracy:!0,timeout:5e3})},[]),i.useEffect(()=>{if(o){const a=j(o.lat,o.lng);l(a)}},[o]),i.useEffect(()=>{const a=n=>{if(n.alpha!==null){let s=n.alpha;typeof n.webkitCompassHeading<"u"&&(s=n.webkitCompassHeading),r(E(s))}};return window.addEventListener("deviceorientation",a,!0),()=>{window.removeEventListener("deviceorientation",a)}},[]);const x=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(a=>{const n=document.createElement("video");n.srcObject=a,n.play(),document.body.appendChild(n);const s=document.createElement("canvas");s.width=n.videoWidth,s.height=n.videoHeight;const m=document.createElement("button");m.textContent="Capturar Foto",m.onclick=()=>{s.getContext("2d").drawImage(n,0,0),s.toDataURL("image/png")},document.body.appendChild(m)}).catch(a=>{alert(`Erro: ${a.message}`)}):alert("Seu navegador não suporta acesso à câmera. Abra o app de câmera manualmente.")},f=()=>(d-e+360)%360,h=Math.abs(f())<5;return t.jsxs("div",{className:"app-container",children:[t.jsx("h1",{children:"🌅 Guia do Pôr do Sol"}),t.jsx("button",{className:`camera-button ${v?"active":""}`,onClick:x,children:"📸 Abrir Câmera"}),u&&t.jsx("div",{className:"error-banner",children:u}),t.jsxs("div",{className:"compass-wrapper",children:[t.jsxs("div",{className:"compass",children:[t.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${f()}deg)`},children:t.jsx("div",{className:"sun-indicator",children:"☀️"})}),t.jsx("div",{className:"alignment-marker"})]}),t.jsxs("div",{className:"info-panel",children:[t.jsxs("p",{children:["⏱ Horário do pôr do sol: ",o&&new Date(p.getTimes(new Date,o.lat,o.lng).sunset).toLocaleTimeString()]}),t.jsxs("p",{children:["🧭 Direção: ",d.toFixed(1),"°"]}),t.jsx("div",{className:`alignment-feedback ${h?"aligned":""}`,children:h?"⭐ ALINHADO! ⭐":"Gire o dispositivo... ➡️"})]})]})]})};b.createRoot(document.getElementById("root")).render(t.jsx(i.StrictMode,{children:t.jsx(y,{})}));
//# sourceMappingURL=index-tqVedH_9.js.map
