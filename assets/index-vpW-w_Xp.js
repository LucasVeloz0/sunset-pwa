import{r as i,j as t,c as A}from"./react-vendor-BzzwJzSH.js";import{s as g}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}})();const b=(r,a)=>{const l=new Date,d=g.getTimes(l,r,a).sunset;return(g.getPosition(d,r,a).azimuth*180/Math.PI+180)%360},w=r=>(360-r)%360,E=()=>{const[r,a]=i.useState(null),[l,d]=i.useState(0),[e,s]=i.useState(0),[u,f]=i.useState(null),[p,x]=i.useState(!1),m=i.useRef(null);i.useEffect(()=>{const o=n=>{a({lat:n.coords.latitude,lng:n.coords.longitude})},c=n=>{f(n.message||"Erro ao obter localiza√ß√£o")};if(!navigator.geolocation){f("Geolocaliza√ß√£o n√£o suportada");return}navigator.geolocation.getCurrentPosition(o,c,{enableHighAccuracy:!0,timeout:5e3})},[]),i.useEffect(()=>{if(r){const o=b(r.lat,r.lng);d(o)}},[r]),i.useEffect(()=>{const o=c=>{if(c.alpha!==null){let n=c.alpha;typeof c.webkitCompassHeading<"u"&&(n=c.webkitCompassHeading),s(w(n))}};return window.addEventListener("deviceorientation",o,!0),()=>{window.removeEventListener("deviceorientation",o)}},[]);const y=async()=>{try{const o=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),c={video:{facingMode:{ideal:"environment"},width:o?{ideal:1280}:{min:1024,ideal:1920},height:o?{ideal:720}:{min:576,ideal:1080},frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(c);m.current&&(m.current.srcObject=n,m.current.setAttribute("playsinline","true"),m.current.onloadedmetadata=()=>{m.current.play().catch(j=>{f("Falha ao iniciar a c√¢mera: "+j.message)})})}catch(o){console.error("Erro AR:",o),f(`C√≥digo: ${o.name} - ${o.message}`)}},h=()=>(l-e+360)%360,v=Math.abs(h())<5;return t.jsxs("div",{className:"app-container",children:[p&&t.jsx("video",{ref:m,className:"ar-video",autoPlay:!0,playsInline:!0}),t.jsx("h1",{children:"üåÖ Ca√ßador de P√¥r do Sol"}),t.jsx("button",{className:"ar-button",onClick:()=>p?x(!1):y(),children:p?"üì∑ Sair do AR":"üåç Modo AR"}),u&&t.jsx("div",{className:"error-banner",children:u}),t.jsxs("div",{className:`compass-wrapper ${p?"ar-active":""}`,children:[t.jsxs("div",{className:"compass",children:[t.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${h()}deg)`},children:t.jsx("div",{className:"sun-indicator",children:"‚òÄÔ∏è"})}),t.jsx("div",{className:"alignment-marker"})]}),t.jsxs("div",{className:"info-panel",children:[t.jsxs("p",{children:["‚è± Hor√°rio do p√¥r do sol: ",r&&new Date(g.getTimes(new Date,r.lat,r.lng).sunset).toLocaleTimeString()]}),t.jsxs("p",{children:["üß≠ Dire√ß√£o: ",l.toFixed(1),"¬∞"]}),t.jsx("div",{className:`alignment-feedback ${v?"aligned":""}`,children:v?"‚≠ê ALINHADO! ‚≠ê":"Gire o dispositivo... ‚û°Ô∏è"})]})]})]})};A.createRoot(document.getElementById("root")).render(t.jsx(i.StrictMode,{children:t.jsx(E,{})}));
//# sourceMappingURL=index-vpW-w_Xp.js.map
