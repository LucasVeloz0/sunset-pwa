{"version":3,"file":"index-C1fycayY.js","sources":["../../src/utils/sunUtils.js","../../src/utils/SkyBackground.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import * as SunCalc from 'suncalc'; // Adicione esta linha no topo\r\n\r\n/**\r\n * Calcula a direção do pôr do sol em graus\r\n * @param {number} lat - Latitude\r\n * @param {number} lng - Longitude\r\n * @returns {number} Azimute em graus (0 = Norte, 90 = Leste)\r\n */\r\nexport const getSunsetDirection = (lat, lng) => {\r\n  const now = new Date();\r\n  const sunsetTime = SunCalc.getTimes(now, lat, lng).sunset;\r\n  const sunPos = SunCalc.getPosition(sunsetTime, lat, lng);\r\n    // Converte radianos para graus e normaliza para 0-360\r\n  return ((sunPos.azimuth * 180 / Math.PI) + 180) % 360;\r\n};\r\n\r\n/**\r\n * Normaliza a orientação do dispositivo\r\n * @param {number} alpha - Ângulo da bússola (0-360)\r\n * @returns {number} Ângulo ajustado\r\n */\r\nexport const normalizeOrientation = (alpha) => {\r\n  return (360 - alpha) % 360;\r\n};\r\n\r\n/**\r\n * Normaliza um ângulo para o intervalo [-180, 180]\r\n * Isso permite transições suaves através do ponto 0/360\r\n */\r\nexport const normalizeAngle = (angle) => {\r\n  angle = angle % 360;\r\n  if (angle > 180) {\r\n    angle -= 360;\r\n  }\r\n  if (angle < -180) {\r\n    angle += 360;\r\n  }\r\n  return angle;\r\n};\r\n\r\n/**\r\n * Calcula a diferença angular mais curta entre dois ângulos\r\n */\r\nexport const shortestAngleDiff = (target, current) => {\r\n  const diff = normalizeAngle(target - current);\r\n  return diff;\r\n};","import React, { useRef, useEffect } from 'react';\r\nimport { Canvas, useFrame } from '@react-three/fiber';\r\nimport { OrbitControls, Stars, Sky as ThreeSky } from '@react-three/drei';\r\nimport * as SunCalc from 'suncalc';\r\n\r\n/**\r\n * Componente 3D que renderiza o Sol e o Céu com base na posição solar\r\n */\r\nconst SkyWithSun = ({ latitude, longitude }) => {\r\n  const sunRef = useRef();\r\n  const skyRef = useRef();\r\n\r\n  useEffect(() => {\r\n  const handleOrientation = (e) => {\r\n    if (sunRef.current) {\r\n      // Ajusta a posição do sol com base no movimento do dispositivo\r\n      const beta = e.beta * 0.01;  // Inclinação frontal (eixo X)\r\n      const gamma = e.gamma * 0.01; // Inclinação lateral (eixo Y)\r\n      sunRef.current.position.y += beta;\r\n      sunRef.current.position.x += gamma;\r\n    }\r\n  };\r\n\r\n  window.addEventListener('deviceorientation', handleOrientation);\r\n  return () => window.removeEventListener('deviceorientation', handleOrientation);\r\n}, []);\r\n\r\n  // Atualiza a posição do Sol com base no horário e localização\r\n  useFrame(() => {\r\n    const now = new Date();\r\n    const sunPos = SunCalc.getPosition(now, latitude, longitude);\r\n\r\n    // Converter coordenadas solares (azimute e altitude) para posição 3D\r\n    const distance = 100; // Distância do sol (ajuste conforme necessário)\r\n    const x = distance * Math.cos(sunPos.altitude) * Math.sin(sunPos.azimuth);\r\n    const y = distance * Math.sin(sunPos.altitude);\r\n    const z = distance * Math.cos(sunPos.altitude) * Math.cos(sunPos.azimuth);\r\n\r\n    if (sunRef.current) {\r\n      sunRef.current.position.set(x, y, z);\r\n    }\r\n\r\n    // Ajusta a cor do céu conforme a posição do sol\r\n    if (skyRef.current) {\r\n      const isDay = sunPos.altitude > 0;\r\n      skyRef.current.material.uniforms.sunPosition.value.set(x, y, z);\r\n      skyRef.current.material.uniforms.turbidity.value = isDay ? 2 : 10; // Céu mais limpo de dia\r\n      skyRef.current.material.uniforms.rayleigh.value = isDay ? 1 : 3; // Atmosfera mais azul de dia\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* Céu dinâmico */}\r\n      <ThreeSky\r\n        ref={skyRef}\r\n        distance={1000}\r\n        sunPosition={[0, 0, 0]}\r\n        turbidity={2}\r\n        rayleigh={1}\r\n        mieCoefficient={0.005}\r\n        mieDirectionalG={0.8}\r\n      />\r\n\r\n      {/* Sol (esfera luminosa) */}\r\n      <mesh ref={sunRef}>\r\n        <sphereGeometry args={[5, 32, 32]} />\r\n        <meshBasicMaterial color=\"#FFD700\" />\r\n        <pointLight intensity={1.5} color=\"#FFD700\" />\r\n      </mesh>\r\n    </>\r\n  );\r\n};\r\n\r\n/**\r\n * Componente principal que renderiza o Canvas 3D\r\n */\r\nexport const SkyBackground = ({ latitude, longitude }) => {\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', zIndex: -1 }}>\r\n      <Canvas camera={{ position: [0, 0, 50], fov: 75 }}>\r\n        <ambientLight intensity={0.1} />\r\n        <SkyWithSun latitude={latitude} longitude={longitude} />\r\n        <OrbitControls enableZoom={false} enablePan={false} enableRotate={false} />\r\n      </Canvas>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport * as SunCalc from 'suncalc';\r\nimport { getSunsetDirection, normalizeOrientation } from './utils/sunUtils';\r\nimport './App.css';\r\nimport { SkyBackground } from './utils/SkyBackground';\r\n\r\n\r\n/**\r\n * Componente principal do aplicativo Guia Fotográfico do Pôr do Sol.\r\n * Gerencia:\r\n * - Geolocalização do usuário\r\n * - Cálculo da direção do sol\r\n * - Orientação do dispositivo\r\n * - Controle de câmera e captura de fotos\r\n * - Interface de bússola digital\r\n */\r\n\r\nconst App = () => {\r\n  // Estados do aplicativo\r\n  const [position, setPosition] = useState(null); // Armazena {lat, lng} do usuário\r\n  const [sunAzimuth, setSunAzimuth] = useState(0); // Direção do sol em graus (0-360)\r\n  const [deviceHeading, setDeviceHeading] = useState(0); // Direção do dispositivo em graus (0-360)\r\n  const [error, setError] = useState(null); // Mensagens de erro\r\n  const [cameraActive, setCameraActive] = useState(false); // Controle de estado da câmera\r\n  const [photo, setPhoto] = useState(null); // URL da foto capturada\r\n  const [facingMode, setFacingMode] = useState('environment'); // 'environment' (traseira) ou 'user' (frontal)\r\n\r\n  // Referências para elementos DOM\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // ======================================================================\r\n  // EFEITOS PARA INICIALIZAÇÃO E GERENCIAMENTO DE RECURSOS\r\n  // ======================================================================\r\n\r\n  /**\r\n   * Efeito para obtenção da geolocalização do usuário.\r\n   * Executa apenas uma vez na montagem do componente.\r\n   */  \r\n  useEffect(() => {\r\n    const handleSuccess = (pos) => {\r\n      setPosition({\r\n        lat: pos.coords.latitude,\r\n        lng: pos.coords.longitude\r\n      });\r\n    };\r\n\r\n    const handleError = (err) => {\r\n      setError(err.message || 'Erro ao obter localização');\r\n    };\r\n\r\n    // Verifica suporte a geolocalização\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocalização não suportada');\r\n      return;\r\n    }\r\n\r\n    // Solicita localização com alta precisão\r\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000\r\n    });\r\n  }, []);\r\n\r\n  /**\r\n   * Efeito para cálculo da direção do sol.\r\n   * Executa sempre que a posição do usuário muda.\r\n   */\r\n  useEffect(() => {\r\n    if (position) {\r\n      // Calcula o azimute do pôr do sol usando a biblioteca SunCalc\r\n      const azimuth = getSunsetDirection(position.lat, position.lng);\r\n      setSunAzimuth(azimuth);\r\n    }\r\n  }, [position]);\r\n  /**\r\n   * Efeito para configuração do sensor de orientação.\r\n   * Adiciona listener para eventos de orientação do dispositivo.\r\n   */\r\n  useEffect(() => {\r\n    const handleOrientation = (event) => {\r\n      if (event.alpha !== null) {\r\n        let alpha = event.alpha;\r\n        // Tratamento especial para iOS (webkitCompassHeading)\r\n        if (typeof event.webkitCompassHeading !== 'undefined') {\r\n          alpha = event.webkitCompassHeading;\r\n        }\r\n\r\n        // Normaliza e atualiza a direção do dispositivo\r\n        setDeviceHeading(normalizeOrientation(alpha));\r\n      }\r\n    };\r\n\r\n    // Verifica suporte ao sensor\r\n    if (window.DeviceOrientationEvent) {\r\n      window.addEventListener('deviceorientation', handleOrientation, true);\r\n    } else {\r\n      setError('Sensor de orientação não suportado neste dispositivo');\r\n    }\r\n    \r\n    // Limpeza: remove listener ao desmontar\r\n    return () => {\r\n      window.removeEventListener('deviceorientation', handleOrientation);\r\n    };\r\n  }, []);\r\n\r\n    /**\r\n   * Efeito para controle da câmera.\r\n   * Gerencia ciclo de vida do stream de vídeo:\r\n   * - Inicia câmera quando cameraActive é true\r\n   * - Para stream quando desativado ou ao desmontar\r\n   * - Alterna entre câmeras quando facingMode muda\r\n   */\r\n  useEffect(() => {\r\n    let stream = null;\r\n    \r\n    const startCamera = async () => {\r\n      try {\r\n        // Evita múltiplas inicializações\r\n        if (videoRef.current && videoRef.current.srcObject) {\r\n          return; // Já está ativo\r\n        }\r\n        \r\n        // Configurações da câmera\r\n        const constraints = {\r\n          video: { \r\n            facingMode: facingMode,\r\n            width: { ideal: 1280 },\r\n            height: { ideal: 720 }\r\n          }\r\n        };\r\n\r\n        // Antes de pedir novo stream, pare o anterior se existir\r\n        if (videoRef.current && videoRef.current.srcObject) {\r\n          videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n          videoRef.current.srcObject = null;\r\n        }\r\n        // Agora peça o novo stream normalmente\r\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n        // Configura elemento de vídeo        \r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = stream;\r\n          videoRef.current.onloadedmetadata = () => {\r\n            videoRef.current.play().catch(err => {\r\n              setError('Erro ao reproduzir vídeo: ' + err.message);\r\n            });\r\n          };\r\n        }\r\n      } catch (err) {\r\n        setError('Erro ao acessar câmera: ' + err.message);\r\n        setCameraActive(false);\r\n      }\r\n    };\r\n\r\n    // Inicia câmera se estiver ativa    \r\n    if (cameraActive) {\r\n      startCamera();\r\n    }\r\n\r\n    // Limpeza: para todos os tracks ao desmontar ou mudar dependências\r\n    return () => {\r\n      if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n      }\r\n    };\r\n  }, [cameraActive, facingMode]);\r\n\r\n\r\n  // ======================================================================\r\n  // FUNÇÕES DE CONTROLE DA CÂMERA\r\n  // ======================================================================\r\n\r\n  /** Alterna entre câmeras frontal e traseira */\r\n  const toggleCamera = () => {\r\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\r\n  };\r\n\r\n  /** Captura uma foto do vídeo atual e gera data URL */  \r\n  const capturePhoto = () => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    \r\n    // Verifica se o vídeo está pronto    \r\n    if (video && canvas && video.readyState >= 2) {\r\n      // Configura canvas com dimensões do vídeo      \r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      const ctx = canvas.getContext('2d');\r\n      \r\n      // Aplica flip horizontal apenas para câmera frontal      \r\n      if (facingMode === 'user') {\r\n        ctx.translate(canvas.width, 0);\r\n        ctx.scale(-1, 1);\r\n      }\r\n      \r\n      // Captura frame atual do vídeo      \r\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      // Gera URL da imagem e atualiza estado      \r\n      setPhoto(canvas.toDataURL('image/jpeg', 0.9));\r\n    }\r\n  };\r\n\r\n  /** Fecha a câmera e libera recursos */  \r\n  const closeCamera = () => {\r\n    if (videoRef.current?.srcObject) {\r\n      // Para todos os tracks de mídia\r\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n      videoRef.current.srcObject = null; \r\n    }\r\n    setCameraActive(false);\r\n    setPhoto(null); // Reseta foto capturada\r\n  };\r\n\r\n  // Efeito de limpeza global\r\n  useEffect(() => {\r\n    return () => {\r\n      if (videoRef.current?.srcObject) {\r\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ======================================================================\r\n  // FUNÇÕES DE CÁLCULO E RENDERIZAÇÃO\r\n  // ======================================================================\r\n\r\n  /** \r\n   * Calcula ângulo relativo entre direção do sol e dispositivo \r\n   * @ returns number Ângulo em graus 0-360\r\n    */\r\n  const calculateRelativeAngle = () => {\r\n    let relativeAngle = (sunAzimuth - deviceHeading + 360) % 360;\r\n  \r\n  // Suaviza a transição quando passa pelo ponto 0/360\r\n  if (relativeAngle > 180) {\r\n    relativeAngle -= 360;\r\n  }\r\n  \r\n  return relativeAngle;\r\n  };\r\n\r\n  /** Verifica se dispositivo está alinhado com o sol (margem de 15 graus) */  \r\n  const isAligned = Math.abs(calculateRelativeAngle()) < 15;\r\n\r\n  // ======================================================================\r\n  // RENDERIZAÇÃO DA INTERFACE\r\n  // ======================================================================\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n\r\n      {/* Renderiza o fundo 3D se a posição estiver disponível */}\r\n      {position && <SkyBackground latitude={position.lat} longitude={position.lng} />}\r\n      <h1>🌅 Localizando o Pôr do Sol</h1>\r\n\r\n      {/* Área da câmera */}\r\n      {cameraActive && (\r\n        <div className=\"camera-container\">\r\n          {/* Elemento de vídeo para preview da câmera */}\r\n          <video\r\n            ref={videoRef}\r\n            className={`camera-preview${facingMode === 'user' ? ' mirrored' : ''}`}\r\n            playsInline // Necessário para iOS\r\n            muted // Não reproduz áudio\r\n          />\r\n\r\n          {/* Controles da câmera */}          \r\n          <div className=\"camera-controls\">\r\n            <button className=\"camera-btn\" onClick={toggleCamera} aria-label=\"Alternar câmera\">\r\n            🔄\r\n            </button>\r\n              <button className=\"camera-btn capture-btn\" onClick={capturePhoto} aria-label=\"Capturar foto\">\r\n             ⭕\r\n             </button>\r\n             <button className=\"camera-btn\" onClick={closeCamera} aria-label=\"Fechar câmera\">\r\n              ✖\r\n             </button>\r\n          </div>\r\n\r\n          {/* Preview da foto capturada */}\r\n          {photo && (\r\n            <div className=\"photo-preview\">\r\n              <img src={photo} alt=\"Foto capturada\" />\r\n              <a \r\n                href={photo} \r\n                download={`por-do-sol-${Date.now()}.jpg`}\r\n                className=\"download-button\"\r\n              >\r\n                ⬇️ Baixar\r\n              </a>\r\n\r\n                <button \r\n                 onClick={() => setPhoto(null)} \r\n                  className=\"close-button\" >\r\n                  ❌ Fechar\r\n                 </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Botão para ativar câmera */}\r\n      {!cameraActive && (\r\n        <button \r\n          className=\"main-camera-btn\"\r\n          onClick={() => setCameraActive(true)}\r\n        >\r\n          📸 Ativar Câmera\r\n        </button>\r\n      )}\r\n\r\n      {/* Bússola digital e informações */}\r\n      <div className=\"compass-wrapper\">\r\n        <div className=\"compass\">\r\n          {/* Seta direcional que aponta para o sol */}          \r\n          <div \r\n            className=\"direction-arrow\"\r\n            style={{ transform: `rotate(${calculateRelativeAngle()}deg)` }}\r\n          >\r\n            <div className=\"sun-indicator\">☀️</div>\r\n          </div>\r\n          {/* Marcador de alinhamento */}          \r\n          <div className=\"alignment-marker\"></div>\r\n        </div>\r\n\r\n        {/* Painel de informações */}\r\n        <div className=\"info-panel\">\r\n          {/* Horário do pôr do sol */}\r\n          <p>⏱ Horário do pôr do sol: {\r\n            position && \r\n            new Date(SunCalc.getTimes(new Date(), position.lat, position.lng).sunset)\r\n              .toLocaleTimeString()\r\n          }</p>\r\n\r\n          {/* Direção do sol */}          \r\n          <p>🧭 Direção: {sunAzimuth.toFixed(1)}°</p>\r\n          {/* Feedback de alinhamento */}          \r\n          <div className={`alignment-feedback ${isAligned ? 'aligned' : ''}`}>\r\n            {isAligned ? '⭐ ALINHADO! ⭐' : 'Gire o dispositivo... ➡️'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Exibição de erros */}\r\n      {error && <div className=\"error-banner\">{error}</div>}\r\n      \r\n      {/* Canvas oculto para captura de fotos */}      \r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import { StrictMode } from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport './index.css'\r\nimport App from './App.jsx'\r\n\r\ncreateRoot(document.getElementById('root')).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>,\r\n)\r\n"],"names":["getSunsetDirection","lat","lng","now","sunsetTime","SunCalc.getTimes","SunCalc.getPosition","normalizeOrientation","alpha","SkyWithSun","latitude","longitude","sunRef","useRef","skyRef","useEffect","handleOrientation","e","beta","gamma","useFrame","sunPos","distance","x","y","z","isDay","jsxs","Fragment","jsx","ThreeSky","SkyBackground","Canvas","OrbitControls","App","position","setPosition","useState","sunAzimuth","setSunAzimuth","deviceHeading","setDeviceHeading","error","setError","cameraActive","setCameraActive","photo","setPhoto","facingMode","setFacingMode","videoRef","canvasRef","handleSuccess","pos","handleError","err","azimuth","event","stream","constraints","track","toggleCamera","prev","capturePhoto","video","canvas","ctx","closeCamera","_a","calculateRelativeAngle","relativeAngle","isAligned","createRoot","StrictMode"],"mappings":"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"}