import{r as n,j as r,c as b}from"./react-vendor-BzzwJzSH.js";import{s as v}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))m(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function u(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(e){if(e.ep)return;e.ep=!0;const o=u(e);fetch(e.href,o)}})();const A=(s,l)=>{const u=new Date,m=v.getTimes(u,s,l).sunset;return(v.getPosition(m,s,l).azimuth*180/Math.PI+180)%360},E=s=>(360-s)%360,N=()=>{const[s,l]=n.useState(null),[u,m]=n.useState(0),[e,o]=n.useState(0),[f,d]=n.useState(null),[p,g]=n.useState(!1),a=n.useRef(null);n.useEffect(()=>{const t=c=>{l({lat:c.coords.latitude,lng:c.coords.longitude})},i=c=>{d(c.message||"Erro ao obter localiza√ß√£o")};if(!navigator.geolocation){d("Geolocaliza√ß√£o n√£o suportada");return}navigator.geolocation.getCurrentPosition(t,i,{enableHighAccuracy:!0,timeout:5e3})},[]),n.useEffect(()=>{if(s){const t=A(s.lat,s.lng);m(t)}},[s]),n.useEffect(()=>{const t=i=>{if(i.alpha!==null){let c=i.alpha;typeof i.webkitCompassHeading<"u"&&(c=i.webkitCompassHeading),o(E(c))}};return window.addEventListener("deviceorientation",t,!0),()=>{window.removeEventListener("deviceorientation",t)}},[]);const y=async()=>{try{const t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),i={video:{facingMode:{ideal:"environment"},width:t?{ideal:1280}:{min:1024,ideal:1920},height:t?{ideal:720}:{min:576,ideal:1080},frameRate:{ideal:60}}},c=await navigator.mediaDevices.getUserMedia(i);a.current&&(a.current.srcObject=c,a.current.setAttribute("playsinline","true"),a.current.onloadedmetadata=()=>{a.current.play().catch(h=>{d("Falha ao iniciar a c√¢mera: "+h.message)})},setTimeout(()=>{a.current&&a.current.play().catch(h=>{d("Falha ao iniciar a c√¢mera: "+h.message)})},500)),g(!0)}catch(t){console.error("Erro AR:",t),t.name==="NotFoundError"?d("Nenhuma c√¢mera foi encontrada neste dispositivo."):t.name==="NotAllowedError"?d("Permiss√£o para acessar a c√¢mera negada."):d(`C√≥digo: ${t.name} - ${t.message}`),g(!1)}},j=()=>(u-e+360)%360,x=Math.abs(j())<5;return r.jsxs("div",{className:"app-container",children:[p&&r.jsx("video",{ref:a,className:"ar-video",autoPlay:!0,playsInline:!0}),r.jsx("h1",{children:"üåÖ Ca√ßador de P√¥r do Sol"}),r.jsx("button",{className:"ar-button",onClick:()=>{p?(g(!1),a.current&&a.current.srcObject&&(a.current.srcObject.getTracks().forEach(i=>i.stop()),a.current.srcObject=null)):y()},children:p?"üì∑ Sair do AR":"üåç Modo AR"}),f&&r.jsx("div",{className:"error-banner",children:f}),r.jsxs("div",{className:`compass-wrapper ${p?"ar-active":""}`,children:[r.jsxs("div",{className:"compass",children:[r.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${j()}deg)`},children:r.jsx("div",{className:"sun-indicator",children:"‚òÄÔ∏è"})}),r.jsx("div",{className:"alignment-marker"})]}),r.jsxs("div",{className:"info-panel",children:[r.jsxs("p",{children:["‚è± Hor√°rio do p√¥r do sol: ",s&&new Date(v.getTimes(new Date,s.lat,s.lng).sunset).toLocaleTimeString()]}),r.jsxs("p",{children:["üß≠ Dire√ß√£o: ",u.toFixed(1),"¬∞"]}),r.jsx("div",{className:`alignment-feedback ${x?"aligned":""}`,children:x?"‚≠ê ALINHADO! ‚≠ê":"Gire o dispositivo... ‚û°Ô∏è"})]})]})]})};b.createRoot(document.getElementById("root")).render(r.jsx(n.StrictMode,{children:r.jsx(N,{})}));
//# sourceMappingURL=index-DPiZVipC.js.map
