{"version":3,"file":"index-CmyVzPN5.js","sources":["../../src/utils/sunUtils.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import * as SunCalc from 'suncalc'; // Adicione esta linha no topo\n\n/**\n * Calcula a dire√ß√£o do p√¥r do sol em graus\n * @param {number} lat - Latitude\n * @param {number} lng - Longitude\n * @returns {number} Azimute em graus (0 = Norte, 90 = Leste)\n */\nexport const getSunsetDirection = (lat, lng) => {\n  const now = new Date();\n  const sunsetTime = SunCalc.getTimes(now, lat, lng).sunset;\n  const sunPos = SunCalc.getPosition(sunsetTime, lat, lng);\n  return ((sunPos.azimuth * 180 / Math.PI) + 180) % 360;\n};\n\n/**\n * Normaliza a orienta√ß√£o do dispositivo\n * @param {number} alpha - √Çngulo da b√∫ssola (0-360)\n * @returns {number} √Çngulo ajustado\n */\nexport const normalizeOrientation = (alpha) => {\n  return (360 - alpha) % 360;\n};","import React, { useState, useEffect, useRef } from 'react';\nimport * as SunCalc from 'suncalc';\nimport { getSunsetDirection, normalizeOrientation } from './utils/sunUtils';\nimport './App.css';\n\nconst App = () => {\n  const [position, setPosition] = useState(null);\n  const [sunAzimuth, setSunAzimuth] = useState(0);\n  const [deviceHeading, setDeviceHeading] = useState(0);\n  const [error, setError] = useState(null);\n  const [cameraActive, setCameraActive] = useState(false);\n  const [photo, setPhoto] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // 1. Obter geolocaliza√ß√£o\n  useEffect(() => {\n    const handleSuccess = (pos) => {\n      setPosition({\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      });\n    };\n\n    const handleError = (err) => {\n      setError(err.message || 'Erro ao obter localiza√ß√£o');\n    };\n\n    if (!navigator.geolocation) {\n      setError('Geolocaliza√ß√£o n√£o suportada');\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, {\n      enableHighAccuracy: true,\n      timeout: 5000\n    });\n  }, []);\n\n  // 2. Calcular dire√ß√£o do sol\n  useEffect(() => {\n    if (position) {\n      const azimuth = getSunsetDirection(position.lat, position.lng);\n      setSunAzimuth(azimuth);\n    }\n  }, [position]);\n\n  // 3. Configurar sensor de orienta√ß√£o\n  useEffect(() => {\n    const handleOrientation = (event) => {\n      if (event.alpha !== null) {\n        let alpha = event.alpha;\n        if (typeof event.webkitCompassHeading !== 'undefined') {\n          alpha = event.webkitCompassHeading;\n        }\n        setDeviceHeading(normalizeOrientation(alpha));\n      }\n    };\n\n    window.addEventListener('deviceorientation', handleOrientation, true);\n    \n    return () => {\n      window.removeEventListener('deviceorientation', handleOrientation);\n    };\n  }, []);\n\n  // 4. Controle da c√¢mera\n  const startCamera = async () => {\n    try {\n      const constraints = {\n        video: {\n          facingMode: 'environment',\n          width: { ideal: 1280 },\n          height: { ideal: 720 }\n        }\n      };\n\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.onloadedmetadata = () => {\n          videoRef.current.play().catch(() => {\n            setError('Toque na tela para iniciar a c√¢mera');\n          });\n        };\n        setCameraActive(true);\n      }\n    } catch (err) {\n      setError(err.message);\n      setCameraActive(false);\n    }\n  };\n\n  const capturePhoto = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    \n    if (video && canvas) {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      \n      ctx.translate(canvas.width, 0);\n      ctx.scale(-1, 1);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      setPhoto(canvas.toDataURL('image/jpeg', 0.9));\n    }\n  };\n\n  const closeCamera = () => {\n    if (videoRef.current?.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n    }\n    setCameraActive(false);\n    setPhoto(null);\n  };\n\n  // 5. C√°lculos de dire√ß√£o\n  const calculateRelativeAngle = () => {\n    return (sunAzimuth - deviceHeading + 360) % 360;\n  };\n\n  const isAligned = Math.abs(calculateRelativeAngle()) < 5;\n\n  return (\n    <div className=\"app-container\">\n      <h1>üåÖ Guia Fotogr√°fico do P√¥r do Sol</h1>\n\n      {!cameraActive && (\n        <button \n          className=\"camera-button\"\n          onClick={startCamera}\n        >\n          üì∏ Ativar C√¢mera\n        </button>\n      )}\n\n      {cameraActive && (\n        <div className=\"camera-interface\">\n          <video\n            ref={videoRef}\n            className=\"camera-preview\"\n            playsInline\n            muted\n            onClick={capturePhoto}\n          />\n          \n          <canvas ref={canvasRef} className=\"photo-canvas\" />\n          \n          <div className=\"camera-controls\">\n            <button className=\"capture-button\" onClick={capturePhoto}>\n              ‚≠ï Capturar\n            </button>\n            <button className=\"close-button\" onClick={closeCamera}>\n              ‚úñ Fechar\n            </button>\n          </div>\n\n          {photo && (\n            <div className=\"photo-preview\">\n              <img src={photo} alt=\"Foto capturada\" />\n              <a \n                href={photo} \n                download={`por-do-sol-${Date.now()}.jpg`}\n                className=\"download-button\"\n              >\n                ‚¨áÔ∏è Baixar\n              </a>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"compass-wrapper\">\n        <div className=\"compass\">\n          <div \n            className=\"direction-arrow\"\n            style={{ transform: `rotate(${calculateRelativeAngle()}deg)` }}\n          >\n            <div className=\"sun-indicator\">‚òÄÔ∏è</div>\n          </div>\n          <div className=\"alignment-marker\"></div>\n        </div>\n\n        <div className=\"info-panel\">\n          <p>‚è± Hor√°rio do p√¥r do sol: {\n            position && \n            new Date(SunCalc.getTimes(new Date(), position.lat, position.lng).sunset)\n              .toLocaleTimeString()\n          }</p>\n          <p>üß≠ Dire√ß√£o: {sunAzimuth.toFixed(1)}¬∞</p>\n          <div className={`alignment-feedback ${isAligned ? 'aligned' : ''}`}>\n            {isAligned ? '‚≠ê ALINHADO! ‚≠ê' : 'Gire o dispositivo... ‚û°Ô∏è'}\n          </div>\n        </div>\n      </div>\n\n      {error && <div className=\"error-banner\">{error}</div>}\n    </div>\n  );\n};\n\nexport default App;","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport './index.css'\nimport App from './App.jsx'\n\ncreateRoot(document.getElementById('root')).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["getSunsetDirection","lat","lng","now","sunsetTime","SunCalc.getTimes","SunCalc.getPosition","normalizeOrientation","alpha","App","position","setPosition","useState","sunAzimuth","setSunAzimuth","deviceHeading","setDeviceHeading","error","setError","cameraActive","setCameraActive","photo","setPhoto","videoRef","useRef","canvasRef","useEffect","handleSuccess","pos","handleError","err","azimuth","handleOrientation","event","startCamera","constraints","stream","capturePhoto","video","canvas","ctx","closeCamera","_a","track","calculateRelativeAngle","isAligned","jsxs","jsx","createRoot","StrictMode"],"mappings":"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"}