{"version":3,"file":"index-WD6Jc84c.js","sources":["../../src/utils/sunUtils.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import * as SunCalc from 'suncalc'; // Adicione esta linha no topo\r\n\r\n/**\r\n * Calcula a dire√ß√£o do p√¥r do sol em graus\r\n * @param {number} lat - Latitude\r\n * @param {number} lng - Longitude\r\n * @returns {number} Azimute em graus (0 = Norte, 90 = Leste)\r\n */\r\nexport const getSunsetDirection = (lat, lng) => {\r\n  const now = new Date();\r\n  const sunsetTime = SunCalc.getTimes(now, lat, lng).sunset;\r\n  const sunPos = SunCalc.getPosition(sunsetTime, lat, lng);\r\n  return ((sunPos.azimuth * 180 / Math.PI) + 180) % 360;\r\n};\r\n\r\n/**\r\n * Normaliza a orienta√ß√£o do dispositivo\r\n * @param {number} alpha - √Çngulo da b√∫ssola (0-360)\r\n * @returns {number} √Çngulo ajustado\r\n */\r\nexport const normalizeOrientation = (alpha) => {\r\n  return (360 - alpha) % 360;\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport * as SunCalc from 'suncalc';\r\nimport { getSunsetDirection, normalizeOrientation } from './utils/sunUtils';\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const [position, setPosition] = useState(null);\r\n  const [sunAzimuth, setSunAzimuth] = useState(0);\r\n  const [deviceHeading, setDeviceHeading] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [arMode, setArMode] = useState(false);\r\n  const videoRef = useRef(null);\r\n\r\n  // 1. Obter geolocaliza√ß√£o\r\n  useEffect(() => {\r\n    const handleSuccess = (pos) => {\r\n      setPosition({\r\n        lat: pos.coords.latitude,\r\n        lng: pos.coords.longitude\r\n      });\r\n    };\r\n\r\n    const handleError = (err) => {\r\n      setError(err.message || 'Erro ao obter localiza√ß√£o');\r\n    };\r\n\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocaliza√ß√£o n√£o suportada');\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000\r\n    });\r\n  }, []);\r\n\r\n  // 2. Calcular dire√ß√£o do sol\r\n  useEffect(() => {\r\n    if (position) {\r\n      const azimuth = getSunsetDirection(position.lat, position.lng);\r\n      setSunAzimuth(azimuth);\r\n    }\r\n  }, [position]);\r\n\r\n  // 3. Configurar sensor de orienta√ß√£o\r\n  useEffect(() => {\r\n    const handleOrientation = (event) => {\r\n      if (event.alpha !== null) {\r\n        let alpha = event.alpha;\r\n        // Corre√ß√£o para iOS\r\n        if (typeof event.webkitCompassHeading !== 'undefined') {\r\n          alpha = event.webkitCompassHeading;\r\n        }\r\n        setDeviceHeading(normalizeOrientation(alpha));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('deviceorientation', handleOrientation, true);\r\n    \r\n    return () => {\r\n      window.removeEventListener('deviceorientation', handleOrientation);\r\n    };\r\n  }, []);\r\n\r\n  // 4. Ativar modo AR\r\n  const activateAR = async () => {\r\n    try {\r\n      const constraints = { video: true }; // C√¢mera padr√£o do dispositivo\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.setAttribute('playsinline', 'true');\r\n        videoRef.current.onloadedmetadata = () => {\r\n          videoRef.current.play().catch(err => {\r\n            setError('Falha ao iniciar a c√¢mera: ' + err.message);\r\n          });\r\n        };\r\n        setTimeout(() => {\r\n          if (videoRef.current) {\r\n            videoRef.current.play().catch(err => {\r\n              setError('Falha ao iniciar a c√¢mera: ' + err.message);\r\n            });\r\n          }\r\n        }, 500);\r\n      }\r\n      setArMode(true);\r\n    } catch (err) {\r\n      console.error('Erro AR:', err);\r\n      if (err.name === 'NotFoundError') {\r\n        setError('Nenhuma c√¢mera foi encontrada neste dispositivo.');\r\n      } else if (err.name === 'NotAllowedError') {\r\n        setError('Permiss√£o para acessar a c√¢mera negada.');\r\n      } else {\r\n        setError(`C√≥digo: ${err.name} - ${err.message}`);\r\n      }\r\n      setArMode(false);\r\n    }\r\n  };\r\n\r\n  // 5. Calcular √¢ngulo relativo\r\n  const calculateRelativeAngle = () => {\r\n    return (sunAzimuth - deviceHeading + 360) % 360;\r\n  };\r\n\r\n  // 6. Verificar alinhamento\r\n  const isAligned = Math.abs(calculateRelativeAngle()) < 5;\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      {arMode && (\r\n        <video \r\n          ref={videoRef}\r\n          className=\"ar-video\"\r\n          autoPlay\r\n          playsInline\r\n        />\r\n      )}\r\n\r\n      <h1>üåÖ Ca√ßador de P√¥r do Sol</h1>\r\n      \r\n      <button \r\n        className=\"ar-button\"\r\n        onClick={() => {\r\n          if (arMode) {\r\n            setArMode(false);\r\n            if (videoRef.current && videoRef.current.srcObject) {\r\n              // Para a c√¢mera ao sair do modo AR\r\n              const tracks = videoRef.current.srcObject.getTracks();\r\n              tracks.forEach(track => track.stop());\r\n              videoRef.current.srcObject = null;\r\n            }\r\n          } else {\r\n            activateAR();\r\n          }\r\n        }}\r\n      >\r\n        {arMode ? 'üì∑ Sair do AR' : 'üåç Modo AR'}\r\n      </button>\r\n\r\n      {error && <div className=\"error-banner\">{error}</div>}\r\n\r\n      <div className={`compass-wrapper ${arMode ? 'ar-active' : ''}`}>\r\n        <div className=\"compass\">\r\n          <div \r\n            className=\"direction-arrow\"\r\n            style={{ transform: `rotate(${calculateRelativeAngle()}deg)` }}\r\n          >\r\n            <div className=\"sun-indicator\">‚òÄÔ∏è</div>\r\n          </div>\r\n          <div className=\"alignment-marker\"></div>\r\n        </div>\r\n\r\n        <div className=\"info-panel\">\r\n          <p>‚è± Hor√°rio do p√¥r do sol: {\r\n            position && \r\n            new Date(SunCalc.getTimes(new Date(), position.lat, position.lng).sunset)\r\n              .toLocaleTimeString()\r\n          }</p>\r\n          <p>üß≠ Dire√ß√£o: {sunAzimuth.toFixed(1)}¬∞</p>\r\n          <div className={`alignment-feedback ${isAligned ? 'aligned' : ''}`}>\r\n            {isAligned ? '‚≠ê ALINHADO! ‚≠ê' : 'Gire o dispositivo... ‚û°Ô∏è'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import { StrictMode } from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport './index.css'\r\nimport App from './App.jsx'\r\n\r\ncreateRoot(document.getElementById('root')).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>,\r\n)\r\n"],"names":["getSunsetDirection","lat","lng","now","sunsetTime","SunCalc.getTimes","SunCalc.getPosition","normalizeOrientation","alpha","App","position","setPosition","useState","sunAzimuth","setSunAzimuth","deviceHeading","setDeviceHeading","error","setError","arMode","setArMode","videoRef","useRef","useEffect","handleSuccess","pos","handleError","err","azimuth","handleOrientation","event","activateAR","constraints","stream","calculateRelativeAngle","isAligned","jsxs","jsx","track","createRoot","StrictMode"],"mappings":"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"}