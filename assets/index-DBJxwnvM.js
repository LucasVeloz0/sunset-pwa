import{r as n,j as t,c as j}from"./react-vendor-BzzwJzSH.js";import{s as h}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(e){if(e.ep)return;e.ep=!0;const o=d(e);fetch(e.href,o)}})();const w=(r,i)=>{const d=new Date,l=h.getTimes(d,r,i).sunset;return(h.getPosition(l,r,i).azimuth*180/Math.PI+180)%360},y=r=>(360-r)%360,E=()=>{const[r,i]=n.useState(null),[d,l]=n.useState(0),[e,o]=n.useState(0),[u,p]=n.useState(null),[f,g]=n.useState(!1),m=n.useRef(null);n.useEffect(()=>{const a=c=>{i({lat:c.coords.latitude,lng:c.coords.longitude})},s=c=>{p(c.message||"Erro ao obter localiza√ß√£o")};if(!navigator.geolocation){p("Geolocaliza√ß√£o n√£o suportada");return}navigator.geolocation.getCurrentPosition(a,s,{enableHighAccuracy:!0,timeout:5e3})},[]),n.useEffect(()=>{if(r){const a=w(r.lat,r.lng);l(a)}},[r]),n.useEffect(()=>{const a=s=>{if(s.alpha!==null){let c=s.alpha;typeof s.webkitCompassHeading<"u"&&(c=s.webkitCompassHeading),o(y(c))}};return window.addEventListener("deviceorientation",a,!0),()=>{window.removeEventListener("deviceorientation",a)}},[]);const N=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Navegador n√£o suporta acesso √† c√¢mera");const a={video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}},s=await navigator.mediaDevices.getUserMedia(a);m.current&&(m.current.srcObject=s,m.current.onloadedmetadata=()=>{m.current.play(),g(!0)})}catch(a){let s="Falha ao acessar a c√¢mera";switch(a.name){case"NotAllowedError":s="Permiss√£o da c√¢mera negada! Ative nas configura√ß√µes do navegador";break;case"NotFoundError":s="Nenhuma c√¢mera traseira encontrada";break;case"NotSupportedError":s="AR n√£o suportado neste dispositivo";break}p(s),g(!1)}},v=()=>(d-e+360)%360,x=Math.abs(v())<5;return t.jsxs("div",{className:"app-container",children:[f&&t.jsx("video",{ref:m,className:"ar-video",autoPlay:!0,playsInline:!0}),t.jsx("h1",{children:"üåÖ Ca√ßador de P√¥r do Sol"}),t.jsx("button",{className:"ar-button",onClick:()=>f?g(!1):N(),children:f?"üì∑ Sair do AR":"üåç Modo AR"}),u&&t.jsx("div",{className:"error-banner",children:u}),t.jsxs("div",{className:`compass-wrapper ${f?"ar-active":""}`,children:[t.jsxs("div",{className:"compass",children:[t.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${v()}deg)`},children:t.jsx("div",{className:"sun-indicator",children:"‚òÄÔ∏è"})}),t.jsx("div",{className:"alignment-marker"})]}),t.jsxs("div",{className:"info-panel",children:[t.jsxs("p",{children:["‚è± Hor√°rio do p√¥r do sol: ",r&&new Date(h.getTimes(new Date,r.lat,r.lng).sunset).toLocaleTimeString()]}),t.jsxs("p",{children:["üß≠ Dire√ß√£o: ",d.toFixed(1),"¬∞"]}),t.jsx("div",{className:`alignment-feedback ${x?"aligned":""}`,children:x?"‚≠ê ALINHADO! ‚≠ê":"Gire o dispositivo... ‚û°Ô∏è"})]})]})]})};j.createRoot(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(E,{})}));
//# sourceMappingURL=index-DBJxwnvM.js.map
