import{r,j as t,c as j}from"./react-vendor-BzzwJzSH.js";import{s as y}from"./suncalc-DPRD1gft.js";import"./vendor-SPyfQU6S.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function c(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(e){if(e.ep)return;e.ep=!0;const s=c(e);fetch(e.href,s)}})();const N=(o,i)=>{const c=new Date,l=SunCalc.getTimes(c,o,i).sunset;return(SunCalc.getPosition(l,o,i).azimuth*180/Math.PI+180)%360},S=o=>(360-o)%360,w=()=>{const[o,i]=r.useState(null),[c,l]=r.useState(0),[e,s]=r.useState(0),[d,f]=r.useState(null),[m,p]=r.useState(!1),g=r.useRef(null);r.useEffect(()=>{const n=a=>{i({lat:a.coords.latitude,lng:a.coords.longitude})},u=a=>{f(a.message||"Erro ao obter localiza√ß√£o")};if(!navigator.geolocation){f("Geolocaliza√ß√£o n√£o suportada");return}navigator.geolocation.getCurrentPosition(n,u,{enableHighAccuracy:!0,timeout:5e3})},[]),r.useEffect(()=>{if(o){const n=N(o.lat,o.lng);l(n)}},[o]),r.useEffect(()=>{const n=u=>{if(u.alpha!==null){let a=u.alpha;typeof u.webkitCompassHeading<"u"&&(a=u.webkitCompassHeading),s(S(a))}};return window.addEventListener("deviceorientation",n,!0),()=>{window.removeEventListener("deviceorientation",n)}},[]);const x=async()=>{try{const n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});g.current.srcObject=n,p(!0)}catch{f("Acesso √† c√¢mera negado ou n√£o suportado")}},h=()=>(c-e+360)%360,v=Math.abs(h())<5;return t.jsxs("div",{className:"app-container",children:[m&&t.jsx("video",{ref:g,className:"ar-video",autoPlay:!0,playsInline:!0}),t.jsx("h1",{children:"üåÖ Ca√ßador de P√¥r do Sol"}),t.jsx("button",{className:"ar-button",onClick:()=>m?p(!1):x(),children:m?"üì∑ Sair do AR":"üåç Modo AR"}),d&&t.jsx("div",{className:"error-banner",children:d}),t.jsxs("div",{className:`compass-wrapper ${m?"ar-active":""}`,children:[t.jsxs("div",{className:"compass",children:[t.jsx("div",{className:"direction-arrow",style:{transform:`rotate(${h()}deg)`},children:t.jsx("div",{className:"sun-indicator",children:"‚òÄÔ∏è"})}),t.jsx("div",{className:"alignment-marker"})]}),t.jsxs("div",{className:"info-panel",children:[t.jsxs("p",{children:["‚è± Hor√°rio do p√¥r do sol: ",o&&new Date(y.getTimes(new Date,o.lat,o.lng).sunset).toLocaleTimeString()]}),t.jsxs("p",{children:["üß≠ Dire√ß√£o: ",c.toFixed(1),"¬∞"]}),t.jsx("div",{className:`alignment-feedback ${v?"aligned":""}`,children:v?"‚≠ê ALINHADO! ‚≠ê":"Gire o dispositivo... ‚û°Ô∏è"})]})]})]})};j.createRoot(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(w,{})}));
//# sourceMappingURL=index-CEq0KG-V.js.map
