{"version":3,"file":"index-C5_mNwjO.js","sources":["../../src/utils/sunUtils.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import * as SunCalc from 'suncalc';\n\n/**\n * Obtém o azimute atual do sol em graus (0 a 360)\n */\nexport const getCurrentSunAzimuth = (lat, lng) => {\n  const now = new Date();\n  const sunPos = SunCalc.getPosition(now, lat, lng);\n  return ((sunPos.azimuth * 180 / Math.PI) + 180) % 360;\n};\n\n/**\n * Obtém o azimute atual da lua em graus (0 a 360)\n */\nexport const getCurrentMoonAzimuth = (lat, lng) => {\n  const now = new Date();\n  const moonPos = SunCalc.getMoonPosition(now, lat, lng);\n  return ((moonPos.azimuth * 180 / Math.PI) + 180) % 360;\n};\n\nexport const normalizeOrientation = (alpha) => {\n  return (360 - alpha) % 360;\n};\n\nexport const smoothAngle = (previous, current, factor) => {\n  let diff = current - previous;\n  \n  // Ajusta para o menor caminho circular\n  if (diff > 180) diff -= 360;\n  if (diff < -180) diff += 360;\n  \n  return previous + diff * factor;\n};\n\n/**\n * Normaliza um ângulo para o intervalo [-180, 180]\n */\nexport const normalizeAngle = (angle) => {\n  angle = angle % 360;\n  if (angle > 180) angle -= 360;\n  if (angle < -180) angle += 360;\n  return angle;\n};","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as SunCalc from 'suncalc';\nimport { getCurrentSunAzimuth, getCurrentMoonAzimuth, normalizeOrientation, smoothAngle, normalizeAngle } from './utils/sunUtils';\nimport './App.css';\n\n\n/**\n * Componente principal do aplicativo Guia Fotográfico do Pôr do Sol.\n * Gerencia:\n * - Geolocalização do usuário\n * - Cálculo da direção do sol\n * - Orientação do dispositivo\n * - Controle de câmera e captura de fotos\n * - Interface de bússola digital\n */\n\nconst App = () => {\n  // Estados do aplicativo\n  const [position, setPosition] = useState(null);\n  const [sunAzimuth, setSunAzimuth] = useState(0);\n  const [deviceHeading, setDeviceHeading] = useState(0);\n  const [error, setError] = useState(null);\n  const [cameraActive, setCameraActive] = useState(false);\n  const [photo, setPhoto] = useState(null);\n  const [facingMode, setFacingMode] = useState('environment');\n  const [isDaytime, setIsDaytime] = useState(false);\n  const [sunTimes, setSunTimes] = useState({ \n    sunrise: null, \n    sunset: null, \n    solarNoon: null \n  });\n  const [celestialBody, setCelestialBody] = useState('sun'); // 'sun' ou 'moon'\n  const [moonAzimuth, setMoonAzimuth] = useState(0);\n  const [moonTimes, setMoonTimes] = useState({ \n    moonrise: null, \n    moonset: null \n  });\n\n  const [moonPhase, setMoonPhase] = useState({\n    fraction: 0,\n    phase: 0,\n    emoji: '🌑'\n  });\n\n  // Referências para elementos DOM\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const notificationTimeout = useRef(null);\n\n  // Estados para notificações\n  const [notificationPermission, setNotificationPermission] = useState('default');\n  const [notificationScheduled, setNotificationScheduled] = useState(false);\n\n    // Novos estados para suavização\nconst [smoothedSunAngle, setSmoothedSunAngle] = useState(deviceHeading || 0);\nconst [smoothedMoonAngle, setSmoothedMoonAngle] = useState(deviceHeading || 0);\n\n    // ======================================================================\n  // FUNÇÕES UTILITÁRIAS PARA A LUA\n  // ======================================================================\n  \n  /**\n   * Determina o emoji da fase lunar com base na fração iluminada\n   * @param {number} fraction - Fração iluminada (0 a 1)\n   * @returns {string} Emoji representando a fase lunar\n   */\n  const getMoonPhaseEmoji = (fraction) => {\n    if (fraction === 0) return '🌑';         // Lua nova\n    if (fraction < 0.25) return '🌒';        // Crescente inicial\n    if (fraction < 0.5) return '🌓';         // Quarto crescente\n    if (fraction < 0.75) return '🌔';        // Gibosa crescente\n    if (fraction === 1) return '🌕';         // Lua cheia\n    if (fraction > 0.75) return '🌖';        // Gibosa minguante\n    if (fraction > 0.5) return '🌗';         // Quarto minguante\n    return '🌘';                             // Minguante final\n  };\n\n  /**\n   * Obtém o nome da fase lunar com base no valor da fase\n   * @param {number} phase - Valor da fase (0 a 1)\n   * @returns {string} Nome da fase lunar\n   */\n  const getMoonPhaseName = (phase) => {\n    if (phase === 0 || phase === 1) return 'Lua Nova';\n    if (phase < 0.25) return 'Crescente Inicial';\n    if (phase === 0.25) return 'Quarto Crescente';\n    if (phase < 0.5) return 'Gibosa Crescente';\n    if (phase === 0.5) return 'Lua Cheia';\n    if (phase < 0.75) return 'Gibosa Minguante';\n    if (phase === 0.75) return 'Quarto Minguante';\n    return 'Minguante Final';\n  };\n\n  // ======================================================================\n  // EFEITOS PARA INICIALIZAÇÃO E GERENCIAMENTO DE RECURSOS\n  // ======================================================================\n\n  /**\n   * Efeito para obtenção da geolocalização do usuário.\n   * Executa apenas uma vez na montagem do componente.\n   */  \n  // Solicitar permissão para notificações\n  useEffect(() => {\n    if ('Notification' in window) {\n      if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {\n        Notification.requestPermission().then(permission => {\n          setNotificationPermission(permission);\n        });\n      } else {\n        setNotificationPermission(Notification.permission);\n      }\n    }\n  }, []);\n\n  // Obter geolocalização do usuário\n  useEffect(() => {\n    const handleSuccess = (pos) => {\n      setPosition({\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      });\n    };\n\n    const handleError = (err) => {\n      setError(err.message || 'Erro ao obter localização');\n    };\n\n    // Verifica suporte a geolocalização\n    if (!navigator.geolocation) {\n      setError('Geolocalização não suportada');\n      return;\n    }\n\n    // Solicita localização com alta precisão\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, {\n      enableHighAccuracy: true,\n      timeout: 5000\n    });\n\n        // Configurar atualização contínua\n    const watchId = navigator.geolocation.watchPosition(\n      handleSuccess,\n      handleError,\n      { enableHighAccuracy: true, timeout: 10000 }\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, []);\n\n  /**\n   * Efeito para cálculo da direção do sol.\n   * Executa sempre que a posição do usuário muda.\n   */\n/**\n   * Efeito para cálculo da direção do sol E DA LUA\n   */\n  useEffect(() => {\n    if (position) {\n      const updateAzimuths = () => {\n        // Calcular azimute do sol\n        const sunAzimuth = getCurrentSunAzimuth(position.lat, position.lng);\n        setSunAzimuth(sunAzimuth);\n\n        // Calcular azimute da lua\n        const moonAzimuth = getCurrentMoonAzimuth(position.lat, position.lng);\n        setMoonAzimuth(moonAzimuth);\n      };\n      \n      updateAzimuths();\n      const interval = setInterval(updateAzimuths, 60000);\n      \n      return () => clearInterval(interval);\n    }\n  }, [position]);\n  /**\n   * Efeito para configuração do sensor de orientação.\n   * Adiciona listener para eventos de orientação do dispositivo.\n   */\n\n  // Configurar sensor de orientação\n  useEffect(() => {\n    const handleOrientation = (event) => {\n      if (event.alpha !== null) {\n        let alpha = event.alpha;\n        // Tratamento especial para iOS (webkitCompassHeading)\n        if (typeof event.webkitCompassHeading !== 'undefined') {\n          alpha = event.webkitCompassHeading;\n        }\n\n        // Normaliza e atualiza a direção do dispositivo\n        setDeviceHeading(normalizeOrientation(alpha));\n      }\n    };\n\n    // Verifica suporte ao sensor\n    if (window.DeviceOrientationEvent) {\n      window.addEventListener('deviceorientation', handleOrientation, true);\n    } else {\n      setError('Sensor de orientação não suportado neste dispositivo');\n    }\n    \n    return () => {\n      window.removeEventListener('deviceorientation', handleOrientation);\n    };\n  }, []);\n\n  /**\n   * Efeito para cálculo dos horários do sol E DA LUA\n   */\n  useEffect(() => {\n    if (position) {\n      const updateCelestialData = () => {\n        const now = new Date();\n        \n        // Dados do sol\n        const times = SunCalc.getTimes(now, position.lat, position.lng);\n        const sunPos = SunCalc.getPosition(now, position.lat, position.lng);\n        \n        setSunTimes({\n          sunrise: times.sunrise,\n          sunset: times.sunset,\n          solarNoon: times.solarNoon\n        });\n        setIsDaytime(sunPos.altitude > 0);\n\n        // Dados da lua\n        const moonTimes = SunCalc.getMoonTimes(now, position.lat, position.lng);\n        setMoonTimes({\n          moonrise: moonTimes.rise,\n          moonset: moonTimes.set\n        });\n\n        const moonIllumination = SunCalc.getMoonIllumination(now);\n        setMoonPhase({\n          fraction: moonIllumination.fraction,\n          phase: moonIllumination.phase,\n          emoji: getMoonPhaseEmoji(moonIllumination.fraction),\n          name: getMoonPhaseName(moonIllumination.phase)\n        });\n      };\n      \n      updateCelestialData();\n      const interval = setInterval(updateCelestialData, 60000);\n      \n      return () => {\n        clearInterval(interval);\n        if (notificationTimeout.current) {\n          clearTimeout(notificationTimeout.current);\n        }\n      };\n    }\n  }, [position]);\n\n    /**\n   * Efeito para controle da câmera.\n   * Gerencia ciclo de vida do stream de vídeo:\n   * - Inicia câmera quando cameraActive é true\n   * - Para stream quando desativado ou ao desmontar\n   * - Alterna entre câmeras quando facingMode muda\n   */\n  // Agendar notificação quando os horários do sol mudarem\n  useEffect(() => {\n    if (sunTimes.sunset && notificationPermission === 'granted' && !notificationScheduled) {\n      scheduleSunsetNotification();\n    }\n  }, [sunTimes, notificationPermission, notificationScheduled]);\n\n    // Função para agendar notificação do pôr do sol\n  const scheduleSunsetNotification = useCallback(() => {\n    if (notificationTimeout.current) {\n      clearTimeout(notificationTimeout.current);\n    }\n    \n    if (!sunTimes.sunset) return;\n\n    const notificationTime = new Date(sunTimes.sunset.getTime() - 15 * 60000);\n    const now = new Date();\n    \n    if (notificationTime <= now) return;\n    \n    const timeUntilNotification = notificationTime - now;\n    \n    notificationTimeout.current = setTimeout(() => {\n      if (notificationPermission === 'granted') {\n        new Notification('O pôr do sol está próximo!', {\n          body: 'Faltam 15 minutos para o pôr do sol. Prepare-se para capturar uma foto perfeita!',\n          icon: '/sunset-icon.png'\n        });\n      }\n      setNotificationScheduled(false);\n    }, timeUntilNotification);\n    \n    setNotificationScheduled(true);\n  }, [sunTimes, notificationPermission]);\n\n  // Controle da câmera\n  useEffect(() => {\n    let stream = null;\n    \n    const startCamera = async () => {\n      try {\n        // Evita múltiplas inicializações\n        if (videoRef.current && videoRef.current.srcObject) {\n          return;\n        }\n        \n        // Configurações da câmera\n        const constraints = {\n          video: { \n            facingMode: facingMode,\n            width: { ideal: 1280 },\n            height: { ideal: 720 }\n          }\n        };\n\n        // Antes de pedir novo stream, pare o anterior se existir\n        if (videoRef.current && videoRef.current.srcObject) {\n          videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n          videoRef.current.srcObject = null;\n        }\n        // Agora peça o novo stream normalmente\n\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\n        // Configura elemento de vídeo        \n        \n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play().catch(err => {\n              setError('Erro ao reproduzir vídeo: ' + err.message);\n            });\n          };\n        }\n      } catch (err) {\n        setError('Erro ao acessar câmera: ' + err.message);\n        setCameraActive(false);\n      }\n    };\n\n    // Inicia câmera se estiver ativa    \n    if (cameraActive) {\n      startCamera();\n    }\n\n    // Limpeza: para todos os tracks ao desmontar ou mudar dependências\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [cameraActive, facingMode]);\n\n  // ======================================================================\n  // FUNÇÕES DE CONTROLE DA CÂMERA\n  // ======================================================================\n\n  /** Alterna entre câmeras frontal e traseira */\n  const toggleCamera = () => {\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\n  };\n\n  /** Captura uma foto do vídeo atual e gera data URL */  \n  const capturePhoto = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    \n    // Verifica se o vídeo está pronto    \n    if (video && canvas && video.readyState >= 2) {\n      // Configura canvas com dimensões do vídeo      \n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      \n      // Aplica flip horizontal apenas para câmera frontal      \n      if (facingMode === 'user') {\n        ctx.translate(canvas.width, 0);\n        ctx.scale(-1, 1);\n      }\n      \n      // Captura frame atual do vídeo      \n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      // Gera URL da imagem e atualiza estado      \n      setPhoto(canvas.toDataURL('image/jpeg', 0.9));\n    }\n  };\n\n  /** Fecha a câmera e libera recursos */  \n  const closeCamera = () => {\n    if (videoRef.current?.srcObject) {\n      // Para todos os tracks de mídia\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      videoRef.current.srcObject = null; \n    }\n    setCameraActive(false);\n    setPhoto(null);\n  };\n\n  // Limpeza global\n  useEffect(() => {\n    return () => {\n      if (videoRef.current?.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      }\n      // Limpar timeout ao desmontar\n      if (notificationTimeout.current) {\n        clearTimeout(notificationTimeout.current);\n      }\n    };\n  }, []);\n\n  // ======================================================================\n  // FUNÇÕES DE CÁLCULO E RENDERIZAÇÃO\n  // ======================================================================\n\n\n\n  /** \n   * Calcula a diferença angular para feedback de alinhamento\n   * @param {number} targetAzimuth\n   * @returns number Diferença angular em graus 0-180\n   */\n  const calculateAngleDifference = (targetAzimuth) => {\n    const diff = Math.abs(targetAzimuth - deviceHeading) % 360;\n    return Math.min(diff, 360 - diff);\n  };\n\n  const calculateRelativeAngle = (targetAzimuth) => {\n    return normalizeAngle(targetAzimuth - deviceHeading);\n  };\n\n\n\n// Suaviza os ângulos de rotação\nuseEffect(() => {\n  if (sunAzimuth === null || moonAzimuth === null || deviceHeading === null) return;\n\n  const sunAngle = calculateRelativeAngle(sunAzimuth);\n  const moonAngle = calculateRelativeAngle(moonAzimuth);\n\n  setSmoothedSunAngle(prev => smoothAngle(prev, sunAngle, 0.2));\n  setSmoothedMoonAngle(prev => smoothAngle(prev, moonAngle, 0.2));\n}, [sunAzimuth, moonAzimuth, deviceHeading]);\n\n  /** Verifica alinhamento com o corpo celeste selecionado */\n  const targetAzimuth = celestialBody === 'sun' ? sunAzimuth : moonAzimuth;\n  const isAligned = calculateAngleDifference(targetAzimuth) < 15;\n\n\n  // ======================================================================\n  // RENDERIZAÇÃO DA INTERFACE\n  // ======================================================================\n\n  return (\n <div className={`app-container ${isDaytime ? 'day-theme' : 'night-theme'}`}>\n      <h1>{celestialBody === 'sun' ? '🌅 Localizando o Sol' : '🌙 Localizando a Lua'}</h1>\n      \n      {/* Botão de alternância */}\n      <div className=\"celestial-toggle\">\n        <button \n          className={celestialBody === 'sun' ? 'active' : ''}\n          onClick={() => setCelestialBody('sun')}\n        >\n          ☀️ Sol\n        </button>\n        <button \n          className={celestialBody === 'moon' ? 'active' : ''}\n          onClick={() => setCelestialBody('moon')}\n        >\n          🌙 Lua\n        </button>\n      </div>\n\n      {/* Informações do corpo celeste */}\n      <div className=\"celestial-info\">\n        {celestialBody === 'sun' ? (\n          <div className=\"info-cards\">\n            <div className=\"info-card\">\n              <span>☀️ Nascer do sol</span>\n              <strong>{formatTime(sunTimes?.sunrise)}</strong>\n            </div>\n            <div className=\"info-card\">\n              <span>🌇 Pôr do sol</span>\n              <strong>{formatTime(sunTimes?.sunset)}</strong>\n            </div>\n          </div>\n        ) : (\n          <div className=\"info-cards\">\n            <div className=\"info-card\">\n              <span>🌕 Nascer da lua</span>\n              <strong>{formatTime(moonTimes?.moonrise)}</strong>\n            </div>\n            <div className=\"info-card\">\n              <span>🌑 Pôr da lua</span>\n              <strong>{formatTime(moonTimes?.moonset)}</strong>\n            </div>\n            {/* Novo card para fase lunar */}\n            <div className=\"info-card moon-phase moon-phase-card\">\n              <span>{moonPhase.emoji} Fase</span>\n              <strong>{moonPhase.name}</strong>\n              <div className=\"moon-phase-bar\">\n                <div \n                  className=\"moon-phase-fill\"\n                  style={{ width: `${moonPhase.fraction * 100}%` }}\n                ></div>\n              </div>\n              <span className=\"moon-percentage\">\n                {Math.round(moonPhase.fraction * 100)}% iluminada\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n\n\n      {/* Área da câmera */}      \n      {cameraActive && (\n        <div className=\"camera-container\">\n          <video\n            ref={videoRef}\n            className={`camera-preview${facingMode === 'user' ? ' mirrored' : ''}`}\n            playsInline\n            muted\n          />\n\n          <div className=\"camera-controls\">\n            <button className=\"camera-btn\" onClick={toggleCamera} aria-label=\"Alternar câmera\">\n              🔄\n            </button>\n            <button className=\"camera-btn capture-btn\" onClick={capturePhoto} aria-label=\"Capturar foto\">\n              ⭕\n            </button>\n            <button className=\"camera-btn\" onClick={closeCamera} aria-label=\"Fechar câmera\">\n              ✖\n            </button>\n          </div>\n\n          {photo && (\n            <div className=\"photo-preview\">\n              <img src={photo} alt=\"Foto capturada\" />\n              <a \n                href={photo} \n                download={`por-do-sol-${Date.now()}.jpg`}\n                className=\"download-button\"\n              >\n                ⬇️ Baixar\n              </a>\n              <button onClick={() => setPhoto(null)} className=\"close-button\">\n                ❌ Fechar\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Bússola digital e informações */}\n      <div className=\"compass-wrapper \">\n        <div className=\"compass\">\n          {/* Ponteiro do Sol (sempre visível) */}\n         <div \n  className={`direction-arrow ${celestialBody === 'sun' ? 'active' : 'secondary'}`} \n  style={{ \n    transform: `rotate(${smoothedSunAngle}deg)` \n  }}\n>\n  <div className=\"celestial-indicator sun-indicator\">☀️</div>\n</div>\n\n{/* Ponteiro da Lua */}\n<div \n  className={`direction-arrow ${celestialBody === 'moon' ? 'active' : 'secondary'}`} \n  style={{ \n    transform: `rotate(${smoothedMoonAngle}deg)` \n  }}\n>\n  <div className=\"celestial-indicator moon-indicator\">\n    {moonPhase.emoji}              \n  </div>            \n </div>   \n</div>\n\n        {/* Botão para ativar câmera */}\n        {!cameraActive && (\n          <button \n            className=\"main-camera-btn\"\n            onClick={() => setCameraActive(true)}\n          >\n            📸 Ativar Câmera\n          </button>\n        )}\n\n        {/* Painel de informações */}\n        <div className=\"info-panel\">\n          <p>\n            🧭 Direção: {celestialBody === 'sun'\n              ? `${sunAzimuth.toFixed(1)}° (Sol)`\n              : `${moonAzimuth.toFixed(1)}° (Lua)`}\n          </p>\n          <div className={`alignment-feedback ${isAligned ? 'aligned' : ''}`}>\n            {isAligned\n              ? `⭐ ALINHADO COM ${celestialBody === 'sun' ? 'O SOL' : 'A LUA'}! ⭐`\n              : `Gire o dispositivo para ${celestialBody === 'sun' ? 'o Sol' : 'a Lua'}... ➡️`}\n          </div>\n        </div>\n\n      </div>\n\n      {/* Exibição de erros */}\n      {error && <div className=\"error-banner\">{error}</div>}\n      \n      {/* Canvas oculto para captura de fotos */}      \n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n    </div>\n  );\n};\n\n// Função utilitária para formatar horários\nfunction formatTime(date) {\n  if (!date) return '--:--';\n  const d = new Date(date);\n  return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n}\n\nexport default App;","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport './index.css'\nimport App from './App.jsx'\n\ncreateRoot(document.getElementById('root')).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["getCurrentSunAzimuth","lat","lng","now","SunCalc.getPosition","getCurrentMoonAzimuth","SunCalc.getMoonPosition","normalizeOrientation","alpha","smoothAngle","previous","current","factor","diff","normalizeAngle","angle","App","position","setPosition","useState","sunAzimuth","setSunAzimuth","deviceHeading","setDeviceHeading","error","setError","cameraActive","setCameraActive","photo","setPhoto","facingMode","setFacingMode","isDaytime","setIsDaytime","sunTimes","setSunTimes","celestialBody","setCelestialBody","moonAzimuth","setMoonAzimuth","moonTimes","setMoonTimes","moonPhase","setMoonPhase","videoRef","useRef","canvasRef","notificationTimeout","notificationPermission","setNotificationPermission","notificationScheduled","setNotificationScheduled","smoothedSunAngle","setSmoothedSunAngle","smoothedMoonAngle","setSmoothedMoonAngle","getMoonPhaseEmoji","fraction","getMoonPhaseName","phase","useEffect","permission","handleSuccess","pos","handleError","err","watchId","updateAzimuths","interval","handleOrientation","event","updateCelestialData","times","SunCalc.getTimes","sunPos","SunCalc.getMoonTimes","moonIllumination","SunCalc.getMoonIllumination","scheduleSunsetNotification","useCallback","notificationTime","timeUntilNotification","stream","constraints","track","toggleCamera","prev","capturePhoto","video","canvas","ctx","closeCamera","_a","calculateAngleDifference","targetAzimuth","calculateRelativeAngle","sunAngle","moonAngle","isAligned","jsx","jsxs","formatTime","date","createRoot","StrictMode"],"mappings":"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"}