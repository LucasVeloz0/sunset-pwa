{"version":3,"file":"index-D3-wJI0U.js","sources":["../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport * as SunCalc from 'suncalc';\nimport './App.css';\n\nfunction App() {\n  const [location, setLocation] = useState(null);\n  const [sunsetData, setSunsetData] = useState(null);\n  const [deviceOrientation, setDeviceOrientation] = useState(0);\n  const [error, setError] = useState(null);\n  const [isAligned, setIsAligned] = useState(false);\n  const [hasVibrated, setHasVibrated] = useState(false);\n\n  const ALIGNMENT_TOLERANCE = 10;\n\n  // 1. Obter geolocalização\n  useEffect(() => {\n    const getLocation = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setLocation({\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            });\n          },\n          (err) => setError(\"Ative a localização para usar o app\")\n        );\n      } else {\n        setError(\"Geolocalização não suportada\");\n      }\n    };\n    getLocation();\n  }, []);\n\n  // 2. Calcular direção do pôr do sol\n  useEffect(() => {\n    if (location) {\n      const now = new Date();\n      const times = SunCalc.getTimes(now, location.lat, location.lng);\n      const sunsetPos = SunCalc.getPosition(times.sunset, location.lat, location.lng);\n      const azimuth = (sunsetPos.azimuth * 180 / Math.PI + 180) % 360;\n\n      setSunsetData({\n        time: times.sunset.toLocaleTimeString(),\n        azimuth\n      });\n    }\n  }, [location]);\n\n  // 3. Sensor de orientação com suavização\n  useEffect(() => {\n    let lastAlpha = 0;\n    const handleOrientation = (e) => {\n      if (e.alpha !== null) {\n        const alpha = 360 - e.alpha;\n        const smoothed = lastAlpha * 0.8 + alpha * 0.2;\n        lastAlpha = smoothed;\n        setDeviceOrientation(smoothed);\n      }\n    };\n\n    window.addEventListener('deviceorientation', handleOrientation, true);\n    return () => {\n      window.removeEventListener('deviceorientation', handleOrientation);\n    };\n  }, []);\n\n  // 4. Cálculo do ângulo relativo e checar alinhamento\n  const calculateRelativeAngle = () => {\n    if (!sunsetData) return 0;\n    const angle = (sunsetData.azimuth - deviceOrientation + 360) % 360;\n    const delta = Math.min(Math.abs(angle), 360 - Math.abs(angle));\n    const aligned = delta < ALIGNMENT_TOLERANCE;\n  \n    setIsAligned(aligned);\n  \n    if (aligned && !hasVibrated) {\n      if (navigator.vibrate) {\n        navigator.vibrate(200); // vibra por 200ms\n      }\n      setHasVibrated(true);\n    } else if (!aligned && hasVibrated) {\n      setHasVibrated(false); // reseta para permitir vibrar novamente\n    }\n  \n    return angle;\n  };\n\n  const relativeAngle = calculateRelativeAngle();\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Bússola do Pôr do Sol</h1>\n\n        {error && <p className=\"error\">{error}</p>}\n\n        {sunsetData && (\n          <div className={`compass-container ${isAligned ? 'aligned' : ''}`}>\n            <div className=\"compass\">\n              <div \n                className=\"arrow\" \n                style={{ transform: `rotate(${relativeAngle}deg)` }}\n              >\n                <div className=\"sun-icon\">☀️</div>\n              </div>\n              <div className=\"compass-circle\"></div>\n            </div>\n\n            <div className=\"info\">\n              <p>Horário: {sunsetData.time}</p>\n              <p>Direção: {sunsetData.azimuth.toFixed(1)}°</p>\n              <p className=\"help\">Gire o celular para alinhar a bússola</p>\n            </div>\n          </div>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport './index.css'\nimport App from './App.jsx'\n\ncreateRoot(document.getElementById('root')).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["App","location","setLocation","useState","sunsetData","setSunsetData","deviceOrientation","setDeviceOrientation","error","setError","isAligned","setIsAligned","hasVibrated","setHasVibrated","ALIGNMENT_TOLERANCE","useEffect","position","err","now","times","SunCalc.getTimes","azimuth","SunCalc.getPosition","lastAlpha","handleOrientation","e","alpha","smoothed","relativeAngle","angle","aligned","jsxs","jsx","createRoot","StrictMode"],"mappings":"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"}